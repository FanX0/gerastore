import{r as i,R as b}from"./app-5671d959.js";import{u as $,a as X,f as W,p as Y,s as P,l as Z,S as fe,D as _,y as ee,j as w,b as te,c as ve,o as R,e as pe,X as re}from"./use-flags-24a59ca7.js";let J=i.createContext(null);J.displayName="OpenClosedContext";var T=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(T||{});function ne(){return i.useContext(J)}function me({value:e,children:t}){return b.createElement(J.Provider,{value:e},t)}function he(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function z(e,...t){e&&t.length>0&&e.classList.add(...t)}function G(e,...t){e&&t.length>0&&e.classList.remove(...t)}function ge(e,t){let n=X();if(!e)return n.dispose;let{transitionDuration:l,transitionDelay:f}=getComputedStyle(e),[h,v]=[l,f].map(o=>{let[a=0]=o.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,g)=>g-u);return a}),c=h+v;if(c!==0){n.group(a=>{a.setTimeout(()=>{t(),a.dispose()},c),a.addEventListener(e,"transitionrun",u=>{u.target===u.currentTarget&&a.dispose()})});let o=n.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(t(),o())})}else t();return n.add(()=>t()),n.dispose}function be(e,t,n,l){let f=n?"enter":"leave",h=X(),v=l!==void 0?he(l):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=$(f,{enter:()=>t.enter,leave:()=>t.leave}),o=$(f,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),a=$(f,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return G(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),z(e,...c,...a),h.nextFrame(()=>{G(e,...a),z(e,...o),ge(e,()=>(G(e,...c),z(e,...t.entered),v()))}),h.dispose}function Ee({container:e,direction:t,classes:n,onStart:l,onStop:f}){let h=W(),v=Y(),c=P(t);Z(()=>{let o=X();v.add(o.dispose);let a=e.current;if(a&&c.current!=="idle"&&h.current)return o.dispose(),l.current(c.current),o.add(be(a,n.current,c.current==="enter",()=>{o.dispose(),f.current(c.current)})),o.dispose},[t])}function y(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let H=i.createContext(null);H.displayName="TransitionContext";var Te=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Te||{});function Ce(){let e=i.useContext(H);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=i.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=i.createContext(null);A.displayName="NestingContext";function M(e){return"children"in e?M(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ie(e,t){let n=P(e),l=i.useRef([]),f=W(),h=Y(),v=R((d,r=w.Hidden)=>{let p=l.current.findIndex(({el:s})=>s===d);p!==-1&&($(r,{[w.Unmount](){l.current.splice(p,1)},[w.Hidden](){l.current[p].state="hidden"}}),h.microTask(()=>{var s;!M(l)&&f.current&&((s=n.current)==null||s.call(n))}))}),c=R(d=>{let r=l.current.find(({el:p})=>p===d);return r?r.state!=="visible"&&(r.state="visible"):l.current.push({el:d,state:"visible"}),()=>v(d,w.Unmount)}),o=i.useRef([]),a=i.useRef(Promise.resolve()),u=i.useRef({enter:[],leave:[],idle:[]}),g=R((d,r,p)=>{o.current.splice(0),t&&(t.chains.current[r]=t.chains.current[r].filter(([s])=>s!==d)),t==null||t.chains.current[r].push([d,new Promise(s=>{o.current.push(s)})]),t==null||t.chains.current[r].push([d,new Promise(s=>{Promise.all(u.current[r].map(([m,E])=>E)).then(()=>s())})]),r==="enter"?a.current=a.current.then(()=>t==null?void 0:t.wait.current).then(()=>p(r)):p(r)}),C=R((d,r,p)=>{Promise.all(u.current[r].splice(0).map(([s,m])=>m)).then(()=>{var s;(s=o.current.shift())==null||s()}).then(()=>p(r))});return i.useMemo(()=>({children:l,register:c,unregister:v,onStart:g,onStop:C,wait:a,chains:u}),[c,v,l,g,C,u,a])}function xe(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Q(e){var t;let n={};for(let l of $e)n[l]=(t=e[l])!=null?t:xe;return n}function we(e){let t=i.useRef(Q(e));return i.useEffect(()=>{t.current=Q(e)},[e]),t}let ye="div",le=fe.RenderStrategy;function Re(e,t){let{beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:h,enter:v,enterFrom:c,enterTo:o,entered:a,leave:u,leaveFrom:g,leaveTo:C,...d}=e,r=i.useRef(null),p=ee(r,t),s=d.unmount?w.Unmount:w.Hidden,{show:m,appear:E,initial:se}=Ce(),[F,U]=i.useState(m?"visible":"hidden"),K=Fe(),{register:L,unregister:O}=K,j=i.useRef(null);i.useEffect(()=>L(r),[L,r]),i.useEffect(()=>{if(s===w.Hidden&&r.current){if(m&&F!=="visible"){U("visible");return}return $(F,{hidden:()=>O(r),visible:()=>L(r)})}},[F,r,L,O,m,s]);let B=P({enter:y(v),enterFrom:y(c),enterTo:y(o),entered:y(a),leave:y(u),leaveFrom:y(g),leaveTo:y(C)}),N=we({beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:h}),k=te();i.useEffect(()=>{if(k&&F==="visible"&&r.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[r,F,k]);let I=se&&!E,oe=(()=>!k||I||j.current===m?"idle":m?"enter":"leave")(),S=ve(0),ue=R(x=>$(x,{enter:()=>{S.addFlag(T.Opening),N.current.beforeEnter()},leave:()=>{S.addFlag(T.Closing),N.current.beforeLeave()},idle:()=>{}})),ce=R(x=>$(x,{enter:()=>{S.removeFlag(T.Opening),N.current.afterEnter()},leave:()=>{S.removeFlag(T.Closing),N.current.afterLeave()},idle:()=>{}})),D=ie(()=>{U("hidden"),O(r)},K);Ee({container:r,classes:B,direction:oe,onStart:P(x=>{D.onStart(r,x,ue)}),onStop:P(x=>{D.onStop(r,x,ce),x==="leave"&&!M(D)&&(U("hidden"),O(r))})}),i.useEffect(()=>{I&&(s===w.Hidden?j.current=null:j.current=m)},[m,I,F]);let q=d,de={ref:p};return E&&m&&(q={...q,className:pe(d.className,...B.current.enter,...B.current.enterFrom)}),b.createElement(A.Provider,{value:D},b.createElement(me,{value:$(F,{visible:T.Open,hidden:T.Closed})|S.flags},re({ourProps:de,theirProps:q,defaultTag:ye,features:le,visible:F==="visible",name:"Transition.Child"})))}function Se(e,t){let{show:n,appear:l=!1,unmount:f,...h}=e,v=i.useRef(null),c=ee(v,t);te();let o=ne();if(n===void 0&&o!==null&&(n=(o&T.Open)===T.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,u]=i.useState(n?"visible":"hidden"),g=ie(()=>{u("hidden")}),[C,d]=i.useState(!0),r=i.useRef([n]);Z(()=>{C!==!1&&r.current[r.current.length-1]!==n&&(r.current.push(n),d(!1))},[r,n]);let p=i.useMemo(()=>({show:n,appear:l,initial:C}),[n,l,C]);i.useEffect(()=>{if(n)u("visible");else if(!M(g))u("hidden");else{let m=v.current;if(!m)return;let E=m.getBoundingClientRect();E.x===0&&E.y===0&&E.width===0&&E.height===0&&u("hidden")}},[n,g]);let s={unmount:f};return b.createElement(A.Provider,{value:g},b.createElement(H.Provider,{value:p},re({ourProps:{...s,as:i.Fragment,children:b.createElement(ae,{ref:c,...s,...h})},theirProps:{},defaultTag:i.Fragment,features:le,visible:a==="visible",name:"Transition"})))}function Pe(e,t){let n=i.useContext(H)!==null,l=ne()!==null;return b.createElement(b.Fragment,null,!n&&l?b.createElement(V,{ref:t,...e}):b.createElement(ae,{ref:t,...e}))}let V=_(Se),ae=_(Re),Le=_(Pe),De=Object.assign(V,{Child:Le,Root:V});export{ne as C,me as c,T as d,De as t};
