import{r as m}from"./app-5671d959.js";import{h as p,T as v}from"./keyboard-cf7c7369.js";import{s as E}from"./use-flags-24a59ca7.js";function d(c,s,r){let l=E(s);m.useEffect(()=>{function i(o){l.current(o)}return document.addEventListener(c,i,r),()=>document.removeEventListener(c,i,r)},[c,r])}function x(c,s,r=!0){let l=m.useRef(!1);m.useEffect(()=>{requestAnimationFrame(()=>{l.current=r})},[r]);function i(e,f){if(!l.current||e.defaultPrevented)return;let a=function u(n){return typeof n=="function"?u(n()):Array.isArray(n)||n instanceof Set?n:[n]}(c),t=f(e);if(t!==null&&t.getRootNode().contains(t)){for(let u of a){if(u===null)continue;let n=u instanceof HTMLElement?u:u.current;if(n!=null&&n.contains(t)||e.composed&&e.composedPath().includes(n))return}return!p(t,v.Loose)&&t.tabIndex!==-1&&e.preventDefault(),s(e,t)}}let o=m.useRef(null);d("mousedown",e=>{var f,a;l.current&&(o.current=((a=(f=e.composedPath)==null?void 0:f.call(e))==null?void 0:a[0])||e.target)},!0),d("click",e=>{o.current&&(i(e,()=>o.current),o.current=null)},!0),d("blur",e=>i(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{x as L};
